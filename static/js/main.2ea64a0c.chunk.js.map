{"version":3,"sources":["components/ManualInput.tsx","components/DisplayDifference.tsx","utils.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["SingleInput","onChange","className","e","target","value","ManualInput","onCompare","useState","inputLeft","setInputLeft","inputRight","setInputRight","onClick","INDENTATION_IN_SPACES","_","range","map","join","addIndentation","s","DisplayError","failedCompare","leftMessage","rightMessage","stringifyWithIndentation","v","indentation","JSON","stringify","replaceAll","DisplayLeftValue","prefix","suffix","DisplayRightValue","DisplayBothValue","DisplayArrayValue","collapse","array","collapsed","setCollapsed","length","i","type","DisplayObjectValue","key","DisplayDifference","comparator","status","result","both","left","right","safeJsonParse","json","parse","error","SyntaxError","message","JSON_VALUE_PRIMITIVE_TYPES_INFERED","addType","isArray","isPlainObject","Error","isPrimitiveType","includes","toLeftRightValues","a","compareArrays","leftArray","rightArray","isSame","values","leftTypedValue","rightTypedValue","c","compareValues","slice","toLeftRightKeyValues","compareKeyArrays","leftKeyArray","rightKeyArray","leftKey","leftValue","rightKey","rightValue","compareObjects","leftObject","rightObject","sortBy","toPairs","k","typedLeftJson","typedRightJson","App","setComparator","leftParsed","rightParsed","undefined","leftJson","rightJson","compareJsons","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2ea64a0c.chunk.js","sourcesContent":["import React, {useState} from 'react'\nimport './ManualInput.scss'\n\ninterface SingleInputPrefs {\n  onChange: (newValue: string) => void\n}\n\nconst SingleInput = ({onChange}: SingleInputPrefs): React.ReactElement => (\n  <div className=\"SingleInput\">\n    <textarea className=\"textarea\" onChange={(e) => onChange(e.target.value)} />\n  </div>\n)\n\ninterface ManualInputPrefs {\n  onCompare: (left: string, right: string) => void\n}\n\nconst ManualInput = ({onCompare}: ManualInputPrefs): React.ReactElement => {\n  const [inputLeft, setInputLeft] = useState('')\n  const [inputRight, setInputRight] = useState('')\n\n  return (\n    <div className=\"ManualInput\">\n      <div className=\"inputs\">\n        <SingleInput onChange={setInputLeft} />\n        <SingleInput onChange={setInputRight} />\n      </div>\n      <div className=\"action\">\n        <div className=\"compare\" onClick={() => onCompare(inputLeft, inputRight)}>\n          Compare\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ManualInput\n","import React, { useState } from 'react'\r\nimport _ from 'lodash'\r\nimport {compareJsons, FailedCompare, JsonArray, JsonObject} from '../utils'\r\nimport './DisplayDifference.scss'\r\n\r\nconst INDENTATION_SIZE = 2 as const\r\nconst INDENTATION_IN_SPACES = _.range(INDENTATION_SIZE).map(() => ' ').join('')\r\n\r\nconst addIndentation = (s = ''): string => `${INDENTATION_IN_SPACES}${s}`\r\n\r\ninterface DisplayDifferencePrefs {\r\n  comparator: ReturnType<typeof compareJsons>\r\n}\r\n\r\nconst DisplayError = ({failedCompare: {leftMessage, rightMessage}}: {failedCompare: FailedCompare}): React.ReactElement => (\r\n  <div className=\"DisplayDifference DisplayError\">\r\n    {leftMessage && <pre>Could not parse left input: {leftMessage}</pre>}\r\n    {rightMessage && <pre>Could not parse right input: {rightMessage}</pre>}\r\n  </div>\r\n)\r\n\r\ninterface PrefixValue {\r\n  prefix?: string\r\n  indentation?: string\r\n  suffix?: string\r\n}\r\n\r\nconst stringifyWithIndentation = (v: unknown, indentation = ''): string =>\r\n  JSON.stringify(v, null, INDENTATION_SIZE).replaceAll('\\n', `\\n${indentation}`)\r\n\r\nconst DisplayLeftValue = ({indentation, prefix, suffix, value}: {value: unknown} & PrefixValue): React.ReactElement => (\r\n  <div className=\"DisplayLeftValue\">\r\n    <pre>{indentation}{prefix ? `${JSON.stringify(prefix)}: ` : ''}{stringifyWithIndentation(value, indentation)}{suffix}</pre>\r\n  </div>\r\n)\r\n\r\nconst DisplayRightValue = ({indentation, prefix, suffix, value}: {value: unknown} & PrefixValue): React.ReactElement => (\r\n  <div className=\"DisplayRightValue\">\r\n    <pre>{indentation}{prefix ? `${JSON.stringify(prefix)}: ` : ''}{stringifyWithIndentation(value, indentation)}{suffix}</pre>\r\n  </div>\r\n)\r\n\r\nconst DisplayBothValue = ({indentation, prefix, suffix, value}: {value: unknown} & PrefixValue): React.ReactElement => (\r\n  <div className=\"DisplayBothValue\">\r\n    <pre>{indentation}{prefix ? `${JSON.stringify(prefix)}: ` : ''}{stringifyWithIndentation(value, indentation)}{suffix}</pre>\r\n  </div>\r\n)\r\n\r\nconst DisplayArrayValue = ({indentation, prefix, suffix, collapse = true, value: {array}}: {value: JsonArray, collapse?: boolean} & PrefixValue): React.ReactElement => {\r\n  const [collapsed, setCollapsed] = useState(collapse)\r\n\r\n  if (array.length === 0) return <div className=\"DisplayArrayValue\"><pre>{indentation}{prefix ? `${JSON.stringify(prefix)}: ` : ''}[]</pre></div>\r\n  if (collapsed) return <div className=\"DisplayCollapsedValue\" onClick={() => setCollapsed(false)}><pre>[...]</pre></div>\r\n\r\n  return (\r\n    <div className=\"DisplayArrayValue\">\r\n      <pre>{indentation}{prefix ? `${JSON.stringify(prefix)}: ` : ''}[</pre>\r\n      {array.map((e, i) => {\r\n        const suffix = i < array.length - 1 ? ',' : ''\r\n        switch (e.type) {\r\n          case 'left':\r\n            return <DisplayLeftValue indentation={addIndentation(indentation)} value={e.value} suffix={suffix} />\r\n          case 'right':\r\n            return <DisplayRightValue indentation={addIndentation(indentation)} value={e.value} suffix={suffix} />\r\n          case 'both':\r\n            return <DisplayBothValue indentation={addIndentation(indentation)} value={e.value} suffix={suffix} />\r\n          case 'complex':\r\n            return e.value.type === 'array'\r\n              ? <DisplayArrayValue indentation={addIndentation(indentation)} value={e.value} suffix={suffix} />\r\n              : <DisplayObjectValue indentation={addIndentation(indentation)} value={e.value} suffix={suffix} />\r\n        }\r\n      })}\r\n      <pre>{indentation}]{suffix}</pre>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst DisplayObjectValue = ({indentation, prefix, suffix, collapse = true, value: {array}}: {value: JsonObject, collapse?: boolean} & PrefixValue): React.ReactElement => {\r\n  const [collapsed, setCollapsed] = useState(collapse)\r\n\r\n  if (array.length === 0) return <div className=\"DisplayObjectValue\"><pre>{'{}'}</pre></div>\r\n  if (collapsed) return <div className=\"DisplayCollapsedValue\" onClick={() => setCollapsed(false)}><pre>{'{'}...{'}'}</pre></div>\r\n\r\n  return (\r\n  <div className=\"DisplayObjectValue\">\r\n    <pre>{indentation}{prefix ? `${JSON.stringify(prefix)}: ` : ''}{'{'}</pre>\r\n    {array.map((e, i) => {\r\n      const suffix = i < array.length - 1 ? ',' : ''\r\n      switch (e.type) {\r\n        case 'left':\r\n          return <DisplayLeftValue indentation={addIndentation(indentation)} prefix={e.key} value={e.value} suffix={suffix} />\r\n        case 'right':\r\n          return <DisplayRightValue indentation={addIndentation(indentation)} prefix={e.key} value={e.value} suffix={suffix} />\r\n        case 'both':\r\n          return <DisplayBothValue indentation={addIndentation(indentation)} prefix={e.key} value={e.value} suffix={suffix} />\r\n        case 'complex':\r\n          return e.value.type === 'array'\r\n            ? <DisplayArrayValue indentation={addIndentation(indentation)} prefix={e.key} value={e.value} suffix={suffix} />\r\n            : <DisplayObjectValue indentation={addIndentation(indentation)} prefix={e.key} value={e.value} suffix={suffix} />\r\n      }\r\n    })}\r\n    <pre>{indentation}{'}'}{suffix}</pre>\r\n  </div>\r\n)\r\n  }\r\n\r\nconst DisplayDifference = ({comparator}: DisplayDifferencePrefs): React.ReactElement => {\r\n  if (comparator.status === 'error') return <DisplayError failedCompare={comparator} />\r\n  const {result} = comparator\r\n  if (result.type === 'same') return <DisplayBothValue value={result.both.value} />\r\n  if (result.type === 'differ') return (\r\n    <>\r\n      <DisplayLeftValue value={result.left.value} />\r\n      <DisplayRightValue value={result.right.value} />\r\n    </>\r\n  )\r\n  if (result.type === 'array') return <DisplayArrayValue value={result} collapse={false} />\r\n  if (result.type === 'object') return <DisplayObjectValue value={result} collapse={false} />\r\n  return (\r\n    <pre>{JSON.stringify(comparator, null, 2)}</pre>\r\n  )\r\n}\r\n\r\nexport default DisplayDifference","import _ from 'lodash'\n\ninterface SuccessfulSafeJsonParse {\n  status: 'ok'\n  json: ReturnType<JSON['parse']>\n}\n\ninterface FailedSafeJsonParse {\n  status: 'error'\n  message: string\n}\n\nexport const safeJsonParse = (s: string): SuccessfulSafeJsonParse | FailedSafeJsonParse => {\n  try {\n    const json = JSON.parse(s)\n    return {status: 'ok', json}\n  } catch (error) {\n    if (error instanceof SyntaxError) {\n      return {status: 'error', message: error.message}\n    }\n    throw error\n  }\n}\n\n// TODO: remove todo\n\ninterface KeyValue {\n  key: string\n}\ninterface LeftValue {\n  type: 'left'\n  value: unknown\n}\n\ntype LeftKeyValue = LeftValue & KeyValue\n\ninterface BothValue {\n  type: 'both'\n  value: null | string | number | boolean | JsonArray | JsonObject\n}\n\ntype BothKeyValue = BothValue & KeyValue\n\ninterface RightValue {\n  type: 'right'\n  value: unknown\n}\n\ntype RightKeyValue = RightValue & KeyValue\n\ninterface ComplexValue {\n  type: 'complex'\n  value: JsonArray | JsonObject\n}\n\ntype ComplexKeyValue = ComplexValue & KeyValue\n\nexport interface JsonRootSame {\n  type: 'same'\n  both: BothValue\n}\n\nexport interface JsonRootDiffer {\n  type: 'differ'\n  left: LeftValue\n  right: RightValue\n}\n\nexport interface JsonArray {\n  type: 'array'\n  isSame: boolean\n  array: Array<LeftValue | BothValue | RightValue | ComplexValue>\n}\n\nexport interface JsonObject {\n  type: 'object'\n  isSame: boolean\n  array: Array<LeftKeyValue | BothKeyValue | RightKeyValue | ComplexKeyValue>\n}\n\ntype JsonRoot = JsonRootSame | JsonRootDiffer | JsonArray | JsonObject\n\nexport interface SuccessfulCompare {\n  status: 'ok'\n  leftJson: ReturnType<JSON['parse']>\n  rightJson: ReturnType<JSON['parse']>\n  result: JsonRoot\n}\n\nexport interface FailedCompare {\n  status: 'error'\n  left: string\n  right: string\n  leftMessage?: string\n  rightMessage?: string\n}\n\nexport type Compare = SuccessfulCompare | FailedCompare\n\nconst tupleArray = (...v: string[]): string[] => v \n\nconst JSON_VALUE_PRIMITIVE_TYPES = ['number', 'string', 'boolean', 'null'] as const\nconst JSON_VALUE_PRIMITIVE_TYPES_INFERED = tupleArray(...JSON_VALUE_PRIMITIVE_TYPES)\n// const JSON_VALUE_TYPES = ['array', 'object', ...JSON_VALUE_PRIMITIVE_TYPES] as const\n\ninterface JsonRawValueNull {\n  type: 'null'\n  value: null\n}\n\ninterface JsonRawValueString {\n  type: 'string'\n  value: string\n}\n\ninterface JsonRawValueNumber {\n  type: 'number'\n  value: number\n}\n\ninterface JsonRawValueBoolean {\n  type: 'boolean'\n  value: boolean\n}\n\ninterface JsonRawValueArray {\n  type: 'array'\n  value: unknown[]\n}\n\ninterface JsonRawValueObject {\n  type: 'object'\n  value: Record<string, unknown>\n}\n\ntype JsonRawValue = JsonRawValueNull | JsonRawValueString | JsonRawValueNumber | JsonRawValueBoolean | JsonRawValueArray | JsonRawValueObject\n\nconst addType = (value: unknown): JsonRawValue => {\n  if (value === null) return {type: 'null', value: null}\n  if (typeof value === 'number') return {type: 'number', value}\n  if (typeof value === 'string') return {type: 'string', value}\n  if (typeof value === 'boolean') return {type: 'boolean', value}\n  if (_.isArray(value)) return {type: 'array', value}\n  if (_.isPlainObject(value)) return {type: 'object', value: value as Record<string, unknown>}\n  throw Error('Unexpected type...')\n}\n\nconst isPrimitiveType = (v: JsonRawValue): v is JsonRawValueNull | JsonRawValueString | JsonRawValueNumber | JsonRawValueBoolean =>\n  JSON_VALUE_PRIMITIVE_TYPES_INFERED.includes(v.type)\n  \nconst toLeftRightValues = (a: unknown[], type: 'left' | 'right'): Array<LeftValue | RightValue> =>\n   a.map((value) => ({type, value}))\n\nconst compareArrays = (leftArray: unknown[], rightArray: unknown[], isSame = true, values: JsonArray['array'] = []): JsonArray => {\n  if (leftArray.length === 0) {\n    return {\n      type: 'array',\n      isSame: isSame && rightArray.length === 0,\n      array: [...values, ...toLeftRightValues(rightArray, 'right')]\n    }\n  }\n\n  if (rightArray.length === 0) {\n    return {\n      type: 'array',\n      isSame: false,\n      array: [...values, ...toLeftRightValues(leftArray, 'left')]\n    }\n  }\n\n  const leftTypedValue = addType(leftArray[0])\n  const rightTypedValue = addType(rightArray[0])\n\n  const c = compareValues(leftTypedValue, rightTypedValue)\n\n  switch (c.type) {\n    case 'same':\n      return compareArrays(leftArray.slice(1), rightArray.slice(1), isSame, [...values, c.both])\n    case 'differ':\n      return compareArrays(leftArray.slice(1), rightArray, false, [...values, c.left])\n    case 'array':\n    case 'object':\n      return compareArrays(leftArray.slice(1), rightArray.slice(1), isSame && c.isSame, [...values, {type: 'complex', value: c}])\n  }\n}\n\nconst toLeftRightKeyValues = (a: Array<[string, unknown]>, type: 'left' | 'right'): Array<LeftKeyValue | RightKeyValue> =>\n   a.map(([key, value]) => ({type, key, value}))\n\nconst compareKeyArrays = (leftKeyArray: Array<[string, unknown]>, rightKeyArray: Array<[string, unknown]>, isSame = true, values: JsonObject['array'] = []): JsonObject => {\n  if (leftKeyArray.length === 0) {\n    return {\n      type: 'object',\n      isSame: isSame && rightKeyArray.length === 0,\n      array: [...values, ...toLeftRightKeyValues(rightKeyArray, 'right')]\n    }\n  }\n\n  if (rightKeyArray.length === 0) {\n    return {\n      type: 'object',\n      isSame: false,\n      array: [...values, ...toLeftRightKeyValues(leftKeyArray, 'left')]\n    }\n  }\n\n  const [leftKey, leftValue] = leftKeyArray[0]\n  const [rightKey, rightValue] = rightKeyArray[0]\n\n  if (leftKey !== rightKey) {\n    return compareKeyArrays(leftKeyArray.slice(1), rightKeyArray, false, [...values, { type: 'left', key: leftKey, value: leftValue }])\n  }\n\n  const leftTypedValue = addType(leftValue)\n  const rightTypedValue = addType(rightValue)\n\n  const c = compareValues(leftTypedValue, rightTypedValue)\n\n  switch (c.type) {\n    case 'same':\n      return compareKeyArrays(leftKeyArray.slice(1), rightKeyArray.slice(1), isSame, [...values, {key: leftKey, ...c.both}])\n    case 'differ':\n      return compareKeyArrays(leftKeyArray.slice(1), rightKeyArray, false, [...values, {key: leftKey, ...c.left}])\n    case 'array':\n    case 'object':\n      return compareKeyArrays(leftKeyArray.slice(1), rightKeyArray.slice(1), isSame && c.isSame, [...values, { type: 'complex', key: leftKey, value: c }])\n  }\n}\n\nconst compareObjects = (leftObject: Record<string, unknown>, rightObject: Record<string, unknown>): JsonObject => {\n  const leftKeyArray = _.sortBy(_.toPairs(leftObject), ([k, _]) => k)\n  const rightKeyArray = _.sortBy(_.toPairs(rightObject), ([k, _]) => k)\n\n  return compareKeyArrays(leftKeyArray, rightKeyArray)\n}\n\nconst compareValues = (typedLeftJson: JsonRawValue, typedRightJson: JsonRawValue, _path: Array<string | number> = []): JsonRoot => {\n  if (typedLeftJson.type === typedRightJson.type) {\n    if (isPrimitiveType(typedLeftJson)) {\n      if (typedLeftJson.value === typedRightJson.value) {\n        return {\n          type: 'same',\n          both: {\n            type: 'both',\n            value: typedLeftJson.value\n          }\n        }\n      } else {\n        return {\n          type: 'differ',\n          left: {\n            type: 'left',\n            value: typedLeftJson.value,\n          },\n          right: {\n            type: 'right',\n            value: typedRightJson.value,\n          }\n        }\n      }\n    }\n\n    if (typedLeftJson.type === 'array' && typedRightJson.type === 'array') {\n      return compareArrays(typedLeftJson.value, typedRightJson.value)\n    }\n    \n    if (typedLeftJson.type === 'object' && typedRightJson.type === 'object') {\n      return compareObjects(typedLeftJson.value, typedRightJson.value)\n    }\n  }\n\n  return {\n    type: 'differ',\n    left: {\n      type: 'left',\n      value: typedLeftJson.value,\n    },\n    right: {\n      type: 'right',\n      value: typedRightJson.value,\n    }\n  }\n}\n\nexport const compareJsons = (left: string, right: string): Compare => {\n  const leftParsed = safeJsonParse(left)\n  const rightParsed = safeJsonParse(right)\n\n  if (leftParsed.status === 'error' || rightParsed.status === 'error') {\n    return {\n      status: 'error',\n      left,\n      right,\n      leftMessage: leftParsed.status === 'error' ? leftParsed.message : undefined,\n      rightMessage: rightParsed.status === 'error' ? rightParsed.message : undefined,\n    }\n  }\n\n  const leftJson = leftParsed.json\n  const rightJson = rightParsed.json\n\n  return {\n    status: 'ok',\n    leftJson,\n    rightJson,\n    result: compareValues(addType(leftJson), addType(rightJson)),\n  }\n}\n","import React, {useState} from 'react'\nimport ManualInput from './components/ManualInput'\nimport DisplayDifference from './components/DisplayDifference'\nimport {compareJsons} from './utils'\nimport './App.scss'\n\nconst App = (): React.ReactElement => {\n  const [comparator, setComparator] = useState<ReturnType<typeof compareJsons> | undefined>()\n\n  return (\n    <div className=\"App\">\n      <h1>Semantic JSON compare</h1>\n      <ManualInput\n        onCompare={(left, right) => setComparator(compareJsons(left, right))}\n      />\n      {comparator && <DisplayDifference comparator={comparator} />}\n    </div>\n  )\n}\n\nexport default App\n","import {ReportHandler} from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler): void => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({getCLS, getFID, getFCP, getLCP, getTTFB}) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport reportWebVitals from './reportWebVitals'\nimport './index.scss'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}